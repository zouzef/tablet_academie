<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unistudios class management</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="/static/css/style2.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    
</head>
<style>
  body {
    user-select: none;      /* Prevent text selection */
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
  }
</style>


<body>
    
    <!-- Full Width Header -->
    {% include 'header.html' %}

    <!-- Horizontal Navigation Menu -->
    <!--{% include 'navbar.html' %}-->


    <!-- Main Content Area -->
    <div class="container-fluid main-content">
        <div class="row">

            <!-- Left Content Area -->
            {% include 'left-content.html' %}
            
            <!-- Right Sidebar -->
            {% include 'right-content.html' %}
        
        </div>
    </div>
<script>
        const mainTabletId = "{{ tablet_id }}";  // Changed name
        console.log("Active session page - Tablet ID:", mainTabletId);

        function checkSession() {
          console.log(`[${new Date().toLocaleTimeString()}] Checking if session is still active...`);

          fetch(`/tablet/${encodeURIComponent(mainTabletId)}/check_session`)  // Use new name
            .then(response => {
              if (!response.ok) {
                throw new Error(`HTTP ${response.status}`);
              }
              return response.json();
            })
            .then(data => {


              if (data.status === 'no_session') {

                window.location.href = window.location.pathname + '?t=' + Date.now();
              }
            })
            .catch(err => {
              console.error("Error checking session:", err);
            });
        }

        // Check immediately, then every 10 seconds
        checkSession();
        setInterval(checkSession, 10000);
</script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="/static/js/js_page_tablet.js"></script>

</body>
</html>